# Система аутентификации и авторизации

Это приложение представляет собой систему для регистрации, входа и выхода пользователей, а также для управления ролями и доступом к ресурсам. Реализована система разграничения прав доступа с использованием JWT-токенов и сессий. Каждый запрос к ресурсу проверяет, имеет ли пользователь права доступа к запрашиваемому ресурсу, и возвращает ошибку, если доступа нет.

## Описание функционала

### 1. Взаимодействие с пользователем
- **Регистрация**: Пользователи могут зарегистрироваться, указав имя (фамилию, имя, отчество), email и пароль. После регистрации создается новый пользователь, и возвращается JWT-токен.
- **Вход**: Для входа в систему пользователь должен предоставить email и пароль. При успешной аутентификации генерируется и возвращается JWT-токен.
- **Выход**: В настоящий момент не реализована явная логика для выхода, но система поддерживает сессии через токены.
- **Обновление данных**: Пользователи могут редактировать свой профиль (например, обновить email или имя).
- **Удаление аккаунта**: Пользователи могут инициировать удаление своего аккаунта, который будет отмечен как неактивный в базе данных (`is_active=False`). Аккаунт будет сохранен в базе данных, но пользователь не сможет снова войти в систему.

### 2. Система разграничения прав доступа
Система управляет правами доступа к ресурсам через роли. Роли могут быть связаны с действиями, которые пользователь может выполнять на различных ресурсах.

- **Роли**: В приложении используются роли для разграничения доступа:
  - **User**: обычный пользователь, имеет доступ к комментариям.
  - **Admin**: администратор, имеет доступ к управлению пользователями и ролями.
  
- **Доступ к комментариям**:
  - **GET** `/comment`: позволяет получить список комментариев.
  - **POST** `/comment`: позволяет добавлять комментарии, доступно только для пользователей с ролью `user` или `admin`.

- **Управление ролями**:
  - **PUT** `/role`: позволяет администратору обновлять роль пользователя (например, изменить роль на `admin`).

### 3. Работа с ресурсами
- **Комментарий**: Каждый пользователь может добавить комментарий. Комментарии хранятся в списке и могут быть получены или добавлены через соответствующие API-методы.

### 4. Ошибки
- **Ошибка 401**: Возвращается, если пользователь не авторизован или токен невалиден.
- **Ошибка 403**: Возвращается, если пользователь не имеет достаточных прав для выполнения действия.
- **Ошибка 404**: Возвращается, если пользователь с данным email не найден при попытке входа.
- **Ошибка 400**: Возвращается, если пароль не совпадает при входе или при неправильных данных регистрации.

## Структура Базы данных

Схема базы данных будет включать следующие таблицы:

- **Users**:
  - `id`: Идентификатор пользователя
  - `login`: Логин пользователя
  - `email`: Электронная почта
  - `password`: Хэш пароля
  - `is_active`: Статус аккаунта (активен/неактивен)
  - `role`: Роль пользователя (например, `user`, `admin`)

- **Roles**:
  - `id`: Идентификатор роли
  - `name`: Название роли (например, `user`, `admin`)



Для работы приложения используйте следующие зависимости:
- **FastAPI** для создания API.
- **Pydantic** для валидации данных.
- **PostgreSQL** для хранения данных о пользователях и их ролях.
- **PyJWT** для генерации и проверки JWT-токенов.

## Установка и запуск

1. Установите зависимости:
   ```bash
   pip install -r req.txt
